<?php

function getTutorialLacta()
{
?>
  <section class="row tutorial mt-4 mb-4">
    <div class="col-md-12">
      <header class="row mb-1">
        <div class="col">
          <h2>Como funciona</h2>
        </div>
      </header>
    </div>
    <div class="col-md-12">
      <div class="row row-eq-height">
        <div class="col-sm-12 col-md-4">
          <div class="d-flex justify-content-start align-items-center step-box">
            <div>
              <svg width="55" height="51" viewBox="0 0 55 51" fill="none" xmlns="http://www.w3.org/2000/svg"  style="margin-right: 21px">
                <path opacity="0.8" d="M26.6799 16.1295L26.6816 16.1388L26.6834 16.1481C27.1784 18.6229 27.432 21.6887 27.432 25.36C27.432 29.1613 27.1781 32.3132 26.6828 34.831L26.6813 34.8387L26.6799 34.8465C26.2387 37.2931 25.3105 39.1893 23.9393 40.5986L23.9392 40.5986L23.9295 40.6088C22.6795 41.9302 20.8026 42.664 18.128 42.664C15.4108 42.664 13.487 41.9299 12.1936 40.6036C10.8602 39.1918 9.93015 37.2902 9.44671 34.8387C8.99243 32.3156 8.76 29.1607 8.76 25.36C8.76 21.6884 8.9923 18.6189 9.44643 16.1387C9.92978 13.6865 10.8599 11.7845 12.1935 10.3724C13.487 9.04613 15.4108 8.312 18.128 8.312C20.8026 8.312 22.6795 9.04577 23.9295 10.3672L23.9295 10.3673L23.9393 10.3774C25.3105 11.7867 26.2387 13.6829 26.6799 16.1295ZM39.6515 8.016V9.016H40.6515H45.7955V48.976V49.976H46.7955H52.6835H53.6835V48.976V2.704V1.704H52.6835H40.6515H39.6515V2.704V8.016ZM4.71909 7.70607C2.20527 12.0166 1 17.9341 1 25.36C1 32.9123 2.20479 38.9148 4.71796 43.268C7.33247 47.7967 11.9014 49.976 18.128 49.976C24.3154 49.976 28.8609 47.7943 31.474 43.268C33.9872 38.9148 35.192 32.9123 35.192 25.36C35.192 17.9341 33.9867 12.0167 31.4729 7.70611C28.8596 3.18113 24.3145 1 18.128 1C11.9023 1 7.33378 3.1787 4.71909 7.70607Z" stroke="#002384" stroke-width="2" />
              </svg>
            </div>
            <p class="ml-3">Compre produtos no site da <a href="https://www.lacta.com.br/" target="_blank">Lacta</a> usando o código do seu ídolo.</p>
          </div>
        </div>
        <div class="col-sm-12 col-md-4">
          <div class="d-flex justify-content-start align-items-center step-box">
            <div>
              <svg width="76" height="52" viewBox="0 0 76 52" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path opacity="0.8" fill-rule="evenodd" clip-rule="evenodd" d="M26.6669 17.3496L26.6635 17.3309C26.2505 15.0404 25.3967 13.3386 24.1903 12.0987L24.1805 12.0886L24.1708 12.0784C23.1642 11.0142 21.5864 10.336 19.0958 10.336C16.5636 10.336 14.9341 11.0144 13.8828 12.0889C12.7086 13.3347 11.8512 15.0484 11.3966 17.3495C10.9577 19.75 10.7278 22.7529 10.7278 26.384C10.7278 30.1451 10.9579 33.2337 11.3972 35.6773C11.8519 37.977 12.7091 39.6898 13.8828 40.9351C14.9341 42.0096 16.5636 42.688 19.0958 42.688C21.5864 42.688 23.1642 42.0098 24.1708 40.9456L24.1805 40.9354L24.1903 40.9253C25.3967 39.6854 26.2505 37.9836 26.6635 35.6931L26.6663 35.6775L26.6694 35.662C27.148 33.229 27.3998 30.1465 27.3998 26.384C27.3998 22.7535 27.1485 19.7577 26.6706 17.3682L26.6669 17.3496ZM12.4398 42.32C10.9464 40.7413 9.94377 38.6507 9.43177 36.048C8.96244 33.4453 8.72777 30.224 8.72777 26.384C8.72777 22.672 8.96244 19.536 9.43177 16.976C9.94377 14.3733 10.9464 12.2827 12.4398 10.704C13.9758 9.12533 16.1944 8.336 19.0958 8.336C21.9544 8.336 24.1304 9.12533 25.6238 10.704C27.1598 12.2827 28.1624 14.3733 28.6318 16.976C29.1438 19.536 29.3998 22.672 29.3998 26.384C29.3998 30.224 29.1438 33.4453 28.6318 36.048C28.1624 38.6507 27.1598 40.7413 25.6238 42.32C24.1304 43.8987 21.9544 44.688 19.0958 44.688C16.1944 44.688 13.9758 43.8987 12.4398 42.32ZM0.967773 26.384C0.967773 18.8708 2.18369 12.7532 4.82196 8.22812C7.662 3.31211 12.6176 1.024 19.0958 1.024C25.5382 1.024 30.4684 3.31696 33.3056 8.22821C35.9439 12.7533 37.1598 18.8709 37.1598 26.384C37.1598 34.0219 35.9449 40.2243 33.3078 44.792C30.471 49.7058 25.5399 52 19.0958 52C12.6159 52 7.65937 49.7107 4.8197 44.792C2.18269 40.2243 0.967773 34.0219 0.967773 26.384ZM31.5758 9.232C29.1864 5.09333 25.0264 3.024 19.0958 3.024C13.1224 3.024 8.94111 5.09333 6.55177 9.232C4.16244 13.328 2.96777 19.0453 2.96777 26.384C2.96777 33.8507 4.16244 39.6533 6.55177 43.792C8.94111 47.9307 13.1224 50 19.0958 50C25.0264 50 29.1864 47.9307 31.5758 43.792C33.9651 39.6533 35.1598 33.8507 35.1598 26.384C35.1598 19.0453 33.9651 13.328 31.5758 9.232ZM40.4513 44.3691L41.1989 43.7687C46.6014 39.4297 50.8111 35.896 53.8414 33.1605C56.8146 30.4344 59.2914 27.6251 61.2852 24.736L61.2885 24.7312C63.2522 21.9035 64.1313 19.2863 64.1313 16.848C64.1313 14.3952 63.5307 12.7385 62.5705 11.6283L62.5517 11.6065L62.5335 11.5843C61.7325 10.6023 60.2726 9.888 57.6193 9.888C55.176 9.888 53.5063 10.6388 52.3354 11.9628C51.1335 13.3275 50.3875 15.2592 50.2735 17.9564L50.1926 19.872H40.5706L40.6446 17.8006C40.8286 12.6463 42.4125 8.40507 45.6154 5.35226C48.7714 2.34415 52.811 0.895996 57.5553 0.895996C62.3279 0.895996 66.3422 2.22585 69.3588 5.08832C72.4413 7.97202 73.8913 11.8931 73.8913 16.592C73.8913 20.5572 72.6915 24.3782 70.3834 28.0262C68.2098 31.4857 65.7171 34.5598 62.9026 37.2403L62.8965 37.2461L62.8904 37.2518C61.156 38.8761 59.1246 40.6671 56.7989 42.624H75.2353V51.488H40.4513V44.3691ZM51.2193 44.624C52.0681 43.9398 52.8861 43.2731 53.6734 42.624C56.7643 40.0756 59.3809 37.7983 61.5233 35.792C64.2113 33.232 66.6006 30.288 68.6913 26.96C70.8246 23.5893 71.8913 20.1333 71.8913 16.592C71.8913 12.3253 70.5899 8.976 67.9873 6.544C65.4273 4.112 61.9499 2.896 57.5553 2.896C53.2459 2.896 49.7259 4.19733 46.9953 6.8C44.6585 9.02724 43.2591 12.0512 42.797 15.872C42.7191 16.516 42.6679 17.1827 42.6433 17.872H48.2753C48.4033 14.8427 49.2566 12.432 50.8353 10.64C52.4566 8.80533 54.7179 7.888 57.6193 7.888C60.6059 7.888 62.7606 8.69866 64.0833 10.32C65.4486 11.8987 66.1313 14.0747 66.1313 16.848C66.1313 19.792 65.0646 22.8 62.9313 25.872C60.8406 28.9013 58.2593 31.824 55.1873 34.64C52.1153 37.4133 47.8699 40.976 42.4513 45.328V49.488H73.2353V44.624H51.2193Z" fill="#002384" />
              </svg>

            </div>
            <p class="ml-3">Os 50 primeiros compradores a usar o código do seu ídolo, vão receber um e-mail com o cupom para resgatar o vídeo.</p>
          </div>
        </div>
        <div class="col-sm-12 col-md-4">
          <div class="d-flex justify-content-start align-items-center step-box">
            <div>
              <svg width="75" height="53" viewBox="0 0 75 53" fill="none" xmlns="http://www.w3.org/2000/svg"  style="margin-right: 1px">
                <path opacity="0.8" d="M26.6799 17.2975L26.6816 17.3069L26.6834 17.3162C27.1784 19.7909 27.432 22.8568 27.432 26.5281C27.432 30.3293 27.1781 33.4812 26.6828 35.9991L26.6813 36.0068L26.6799 36.0146C26.2387 38.4612 25.3105 40.3574 23.9393 41.7667L23.9392 41.7667L23.9295 41.7769C22.6795 43.0983 20.8026 43.8321 18.128 43.8321C15.4108 43.8321 13.487 43.098 12.1936 41.7717C10.8602 40.3599 9.93015 38.4583 9.44671 36.0068C8.99243 33.4837 8.76 30.3287 8.76 26.5281C8.76 22.8565 8.9923 19.787 9.44643 17.3068C9.92978 14.8546 10.8599 12.9525 12.1935 11.5405C13.487 10.2142 15.4108 9.48008 18.128 9.48008C20.8026 9.48008 22.6795 10.2138 23.9295 11.5353L23.9295 11.5353L23.9393 11.5454C25.3105 12.9547 26.2387 14.851 26.6799 17.2975ZM41.0624 15.4442L40.9805 16.5201H42.0595H47.7555H48.6342L48.7472 15.6486C49.0171 13.5669 49.8688 11.9691 51.2796 10.781C52.6794 9.60224 54.5656 8.96807 57.0355 8.96807C59.6072 8.96807 61.4166 9.60962 62.6221 10.7443L62.6274 10.7492L62.6327 10.7541C63.8933 11.9066 64.5475 13.4389 64.5475 15.4561C64.5475 17.8023 63.685 19.4238 62.0079 20.4971C60.2292 21.5919 57.4818 22.2217 53.638 22.2641H52.1075H51.1075V23.2641V28.1281V29.1281H52.1075H53.5795C57.813 29.1281 60.8003 29.8257 62.6927 31.0747C64.4739 32.2503 65.4435 34.192 65.4435 37.1521C65.4435 39.3931 64.7383 41.155 63.3684 42.525C62.0813 43.8121 60.1145 44.5361 57.2915 44.5361C54.4917 44.5361 52.3618 43.7806 50.7944 42.3625C49.1947 40.9152 48.2534 39.0529 47.9808 36.7162L47.8776 35.8321H46.9875H41.3555H40.274L40.3586 36.9103C40.7174 41.4854 42.4387 45.1259 45.5838 47.716L45.5838 47.716L45.5906 47.7216C48.7054 50.2409 52.6542 51.4641 57.3555 51.4641C60.5867 51.4641 63.4143 50.8887 65.8027 49.6945C68.175 48.5084 69.9947 46.8656 71.2134 44.7564L71.2181 44.7481C72.4189 42.6236 73.0115 40.2545 73.0115 37.6641C73.0115 34.2528 72.1561 31.3884 70.3571 29.1634C69.0907 27.597 67.507 26.4089 65.6266 25.592C67.2033 24.8535 68.5522 23.7709 69.6606 22.3475C71.3467 20.2374 72.1795 17.7317 72.1795 14.8801C72.1795 12.4499 71.5816 10.2409 70.3702 8.28096C69.1917 6.30457 67.437 4.77537 65.1591 3.67979C62.9007 2.53009 60.2454 1.97607 57.2275 1.97607C52.7018 1.97607 48.9209 3.13271 45.9729 5.52796C43.0027 7.94128 41.3792 11.2809 41.0624 15.4442ZM4.71909 8.87414C2.20527 13.1847 1 19.1022 1 26.5281C1 34.0803 2.20479 40.0829 4.71796 44.4361C7.33247 48.9647 11.9014 51.1441 18.128 51.1441C24.3154 51.1441 28.8609 48.9623 31.474 44.4361C33.9872 40.0829 35.192 34.0803 35.192 26.5281C35.192 19.1022 33.9867 13.1847 31.4729 8.87419C28.8596 4.34921 24.3145 2.16808 18.128 2.16808C11.9023 2.16808 7.33378 4.34678 4.71909 8.87414Z" stroke="#002384" stroke-width="2" />
              </svg>
            </div>
            <p class="ml-3">Escolha um dos ídolos dessa página para gravar seu vídeo de graça usando o cupom.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
<?php
}

function get_lacta_insctruction($product)
{
?>
  <div class="lacta-instruction event-lacta">
    <div class="header-box text-center">
      <h3 style="line-height:20px;">Como resgatar meu vídeo</h3>
    </div>
    <div class="content-box mt-3 px-2">
      <div class="row">
        <div class="col-12 d-flex align-items-center">
          <ul class="order-flow half">
            <li class="item itempayment-approved complete">
              <span class="background status">1</span>
              <span class="text">
                <p class="description">Compre produtos no site da <a href="<?= $product->get_meta( '_promotional_event_link_buy', true ); ?>" target="_blank"><b>Lacta</b></a>, usando o código do seu ídolo.</p>
              </span>
            </li>
            <li class="item itempayment-approved complete">
              <span class="background status">2</span>
              <span class="text">
                <p class="description">Os 50 primeiros compradores a usar o código do seu ídolo, vão receber um e-mail com o cupom para resgatar o vídeo.</p>
              </span>
            </li>
            <li class="item itempayment-approved complete">
              <span class="background status">3</span>
              <span class="text">
                <p class="description">Clique em "Resgatar meu vídeo" no topo da página e insira o seu cupom.</p>
              </span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
<?php
}

function polen_get_lacta_banner_2($link)
{
?>
  <div class="row my-4">
    <div class="col-12">
      <img src="<?php echo TEMPLATE_URI . '/assets/img/lacta/bg-banner-2-desktop.jpg'; ?>" alt="Banner Lacta" class="d-none d-md-block" style="width: 100%; border-radius: 8px;" />
      <img src="<?php echo TEMPLATE_URI . '/assets/img/lacta/bg-banner-2-mobile.jpg'; ?>" alt="Banner Lacta" class="d-block d-md-none" style="width: 100%; border-radius: 8px;" />
      <a href="<?php echo $link; ?>" target="_blank" class="lacta-banner-link"></a>
    </div>
  </div>
<?php
}

function polen_get_lacta_thank_you($talent)
{
?>
  <div class="lacta-thank-you event-lacta">
    <div class="title-box">
      <img src="<?php echo TEMPLATE_URI . '/assets/img/lacta/balao.png'; ?>" alt="Obrigado" />
      <h4>Agradecemos seu pedido!</h4>
    </div>
    <p><?php echo $talent; ?> pode enviar seu vídeo personalizado em até 15 dias</p>
  </div>
<?php
}

function polen_get_lacta_header_talent($image, $talent_name)
{
?>
  <div class="lacta-header-talent event-lacta">
    <figure class="image">
      <img loading="lazy" src="<?php echo $image; ?>" alt="<?php echo $talent_name; ?>">
    </figure>
    <h2><?php echo $talent_name; ?></h2>
  </div>
<?php
}

function lacta_coupon( $product )
{
?>
  <?php $inputs = new Material_Inputs(); ?>
	<div class="row mb-3">
		<div class="col-12 event-lacta">
			<form id="va-check-code">
        <?php wp_nonce_field( 'check-coupon', 'security', true ); ?>
        <?php
          $inputs->input_hidden("action", "check_coupon");
          $inputs->input_hidden("product", $product->get_sku());
          $inputs->input_hidden("terms", "1");

          $inputs->material_input(Material_Inputs::TYPE_TEXT, "coupon", "coupon", "Inserir cupom", true, "mb-3");
          $inputs->material_button(Material_Inputs::TYPE_SUBMIT, "send_form", "Checar", "mdc-button mdc-button--raised mdc-ripple-upgraded");
        ?>
			</form>
		</div>
	</div>
	<script>
		const formId = '#va-check-code';
		const form = document.querySelector(formId);
		form.addEventListener("submit", function(e) {
			e.preventDefault();
			polAjaxForm(formId, function(res) {
				polSpinner();
				blockUnblockInputs(formId, true);
				window.location.href = res.url;
			}, function(e) {
				polMessages.error(e);
			}, false);
		});
	</script>
<?php
}

function lacta_cart_form( $product, $coupon = "")
{
?>
	<div class="row mb-3">
		<div class="col-12 event-lacta">
			<div class="row">
				<div class="col-12 lacta-toast">
          <?= polen_get_toast('Seu cupom foi validado com sucesso! Para continuar preencha os dados abaixo.'); ?>
				</div>
			</div>
      <?php $inputs = new Material_Inputs(); ?>
			<form id="va-cart-form">
        <?php
          $inputs->input_hidden("action", "create_orders_video_autograph");
          $inputs->input_hidden("coupon", $coupon);
          $inputs->input_hidden("product", $product->get_sku());
          $inputs->material_input(Material_Inputs::TYPE_TEXT, "name", "name", "Para quem é o vídeo?", true, "mb-3", array("maxlength" => "50"));
          $inputs->material_input(Material_Inputs::TYPE_TEXT, "city", "city", "Qual a cidade da pessoa?", true, "mb-3", array("maxlength" => "50"));
          $inputs->material_input(Material_Inputs::TYPE_EMAIL, "email", "email", "Digite seu e-mail", true, "mb-3", array("maxlength" => "50"));
        ?>
				<p>
					<label>
						<input type="checkbox" class="form-control form-control-lg" name="terms" id="terms" required />
						<span class="woocommerce-terms-and-conditions-checkbox-text ml-2" style="line-height: 24px;">Li e concordo com o(s) <a href="http://polen.me/politica-de-privacidade/" class="woocommerce-terms-and-conditions-link" target="_blank">termos e condições</a></span>
					</label>
				</p>
				<p>
					<input type="hidden" name="security" value="<?= wp_create_nonce(Promotional_Event_Admin::NONCE_ACTION); ?>" />
				</p>
        <?php $inputs->material_button(Material_Inputs::TYPE_SUBMIT, "send_form", "Pedir meu vídeo", "mdc-button mdc-button--raised mdc-ripple-upgraded"); ?>
			</form>
		</div>
	</div>
	<script>
		const formId = '#va-cart-form';
		const form = document.querySelector(formId);
		form.addEventListener("submit", function(e) {
			e.preventDefault();
			polAjaxForm(formId, function(res) {
				polSpinner();
				blockUnblockInputs(formId, true);
				window.location.href = res.url;
			}, function(e) {
				polMessages.error(e.Error);
			});
		});
	</script>
<?php
}

function get_lacta_partners()
{
?>
	<div class="row">
		<div class="col-12 d-flex justify-content-center align-items-center">
      <img src="<?php echo TEMPLATE_URI . '/assets/img/lacta/logo-lacta.png'; ?>" alt="Lacta" style="max-width: 100%" />
      <img src="<?php echo TEMPLATE_URI . '/assets/img/lacta/logo-lacos.png'; ?>" alt="Criando Laços" style="max-width: 100%" class="mr-4" />
		</div>
	</div>
<?php
}
